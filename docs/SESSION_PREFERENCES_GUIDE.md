# ๐ก๏ธ ุฏููู ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช ูุชูุถููุงุช ุงููุณุชุฎุฏู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงููู ุฌุฏูุฏูู ูููุดุฑูุน ูุชุญุณูู ุงูุฃูุงู ูุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:

1. **ูุธุงู ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช** - ููุฑุงูุจุฉ ุงูุฌูุณุงุช ุงููุดุทุฉ ูุงูุชุญูู ุจุงูุฃูุงู
2. **ูุธุงู ุชูุถููุงุช ุงููุณุชุฎุฏู** - ูุญูุธ ุงูุฅุนุฏุงุฏุงุช ุงูุดุฎุตูุฉ

---

## ๐ก๏ธ ูุธุงู ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช

### ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

- **ุชุชุจุน ุงูุฌูุณุงุช ุงููุดุทุฉ** ููู ูุณุชุฎุฏู
- **ูุนูููุงุช ุงูุฌูุงุฒ ูุงููููุน** ููู ุฌูุณุฉ
- **ุฅููุงุก ุงูุฌูุณุงุช ุนู ุจุนุฏ** ูู ุฃุฌูุฒุฉ ุฃุฎุฑู
- **ุงูุชูุงุก ุตูุงุญูุฉ ุชููุงุฆู** ููุฌูุณุงุช
- **ุชุณุฌูู ุงูุฎุฑูุฌ ูู ุฌููุน ุงูุฃุฌูุฒุฉ**

### ๐ง ุงุณุชุฎุฏุงู API

#### ุชุณุฌูู ุงูุฏุฎูู ูุน ุฅูุดุงุก ุฌูุณุฉ

```javascript
// POST /api/sessions/login
{
  "username": "username",
  "password": "password",
  "remember_me": false  // ุงุฎุชูุงุฑู
}
```

#### ุงูุญุตูู ุนูู ุงูุฌูุณุงุช ุงููุดุทุฉ

```javascript
// GET /api/sessions/active
// ุงูุงุณุชุฌุงุจุฉ:
{
  "success": true,
  "data": [
    {
      "id": 1,
      "device_info": {
        "userAgent": "Mozilla/5.0...",
        "browser": "Chrome",
        "platform": "Windows"
      },
      "ip_address": "192.168.1.100",
      "login_time": "2024-01-15T10:30:00Z",
      "last_activity": "2024-01-15T14:20:00Z",
      "is_current": true
    }
  ]
}
```

#### ุฅููุงุก ุฌูุณุฉ ูุญุฏุฏุฉ

```javascript
// DELETE /api/sessions/{sessionId}
```

#### ุชุณุฌูู ุงูุฎุฑูุฌ ูู ุฌููุน ุงูุฃุฌูุฒุฉ

```javascript
// POST /api/sessions/logout-all
```

### ๐จ ุงุณุชุฎุฏุงู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

```jsx
import SessionManager from "../components/SessionManager.jsx";

function App() {
  const [showSessionManager, setShowSessionManager] = useState(false);

  return (
    <div>
      <button onClick={() => setShowSessionManager(true)}>ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช</button>

      <SessionManager
        isOpen={showSessionManager}
        onClose={() => setShowSessionManager(false)}
      />
    </div>
  );
}
```

---

## โ๏ธ ูุธุงู ุชูุถููุงุช ุงููุณุชุฎุฏู

### ุงูุฅุนุฏุงุฏุงุช ุงููุฏุนููุฉ

#### ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ

- **ุงููุบุฉ**: ุงูุนุฑุจูุฉุ ุงูุฅูุฌููุฒูุฉุ ุงููุฑูุณูุฉุ ุงูููููุฏูุฉ
- **ุงููุธูุฑ**: ูุงุชุญุ ุฏุงููุ ุชููุงุฆู
- **ุงูููุทูุฉ ุงูุฒูููุฉ**: Europe/Brussels (ุงูุชุฑุงุถู)
- **ุงูุนููุฉ**: EUR (ุงูุชุฑุงุถู)
- **ุชูุณูู ุงูุชุงุฑูุฎ**: DD/MM/YYYYุ MM/DD/YYYYุ YYYY-MM-DD
- **ุชูุณูู ุงูููุช**: 12hุ 24h
- **ุชุณุฌูู ุงูุฎุฑูุฌ ุงูุชููุงุฆู**: ุจุงูุฏูุงุฆู (30-1440)

#### ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช

- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: ุชุดุบูู/ุฅููุงู
- **ุงูุฅุดุนุงุฑุงุช ุงููุฏููุนุฉ**: ุชุดุบูู/ุฅููุงู
- **ุงูุฑุณุงุฆู ุงููุตูุฉ**: ุชุดุบูู/ุฅููุงู
- **ุฅุดุนุงุฑุงุช ุงูุทูุจุงุช**: ุชุดุบูู/ุฅููุงู
- **ุฅุดุนุงุฑุงุช ุงููุฏููุนุงุช**: ุชุดุบูู/ุฅููุงู
- **ุฅุดุนุงุฑุงุช ุงููุธุงู**: ุชุดุบูู/ุฅููุงู

#### ุชูุถููุงุช ุงูุนุฑุถ

- **ุนุฏุฏ ุงูุนูุงุตุฑ ูู ุงูุตูุญุฉ**: 10-100
- **ุนุฑุถ ุงูุตูุฑ**: ุชุดุบูู/ุฅููุงู
- **ุนุฑุถ ุงูุฃูุตุงู**: ุชุดุบูู/ุฅููุงู
- **ุงูุนุฑุถ ุงูุงูุชุฑุงุถู**: ุฌุฏููุ ุดุจูุฉุ ูุงุฆูุฉ

#### ุฅุนุฏุงุฏุงุช ุฅููุงููุฉ ุงููุตูู

- **ุงูุชุจุงูู ุงูุนุงูู**: ุชุดุบูู/ุฅููุงู
- **ุงููุต ุงููุจูุฑ**: ุชุดุบูู/ุฅููุงู
- **ูุงุฑุฆ ุงูุดุงุดุฉ**: ุชุดุบูู/ุฅููุงู
- **ุงูุชููู ุจููุญุฉ ุงูููุงุชูุญ**: ุชุดุบูู/ุฅููุงู

#### ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ

- **ูุดุงุฑูุฉ ุงููุดุงุท**: ุชุดุบูู/ุฅููุงู
- **ุงูุชุญูููุงุช**: ุชุดุบูู/ุฅููุงู
- **ุงูุชุณููู**: ุชุดุบูู/ุฅููุงู

### ๐ง ุงุณุชุฎุฏุงู API

#### ุงูุญุตูู ุนูู ุชูุถููุงุช ุงููุณุชุฎุฏู

```javascript
// GET /api/preferences
// ุงูุงุณุชุฌุงุจุฉ:
{
  "success": true,
  "data": {
    "general": {
      "language": "ar",
      "theme": "light",
      "timezone": "Europe/Brussels",
      "currency": "EUR",
      "date_format": "DD/MM/YYYY",
      "time_format": "24h",
      "auto_logout": 480
    },
    "notifications": {
      "email": true,
      "push": true,
      "sms": false,
      "orders": true,
      "payments": true,
      "system": true
    }
    // ... ุจุงูู ุงูุฅุนุฏุงุฏุงุช
  }
}
```

#### ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ

```javascript
// PUT /api/preferences/general
{
  "language": "en",
  "theme": "dark",
  "date_format": "MM/DD/YYYY"
}
```

#### ุชุญุฏูุซ ุงููุบุฉ ุณุฑูุนุงู

```javascript
// PUT /api/preferences/language
{
  "language": "en"
}
```

#### ุฅุนุงุฏุฉ ุชุนููู ุงูุชูุถููุงุช

```javascript
// POST /api/preferences/reset
{
  "section": "general"  // ุฃู notificationsุ displayุ accessibilityุ privacy
}
// ุฃู ูุฅุนุงุฏุฉ ุชุนููู ุฌููุน ุงูุชูุถููุงุช:
{
  "section": null
}
```

### ๐จ ุงุณุชุฎุฏุงู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

```jsx
import PreferencesSettings from "../components/PreferencesSettings.jsx";

function App() {
  const [showPreferences, setShowPreferences] = useState(false);

  return (
    <div>
      <button onClick={() => setShowPreferences(true)}>ุงูุฅุนุฏุงุฏุงุช</button>

      <PreferencesSettings
        isOpen={showPreferences}
        onClose={() => setShowPreferences(false)}
      />
    </div>
  );
}
```

---

## ๐ ุงุนุชุจุงุฑุงุช ุงูุฃูุงู

### ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช

- **ุชุดููุฑ ุงูุชูููุงุช**: ุฌููุน session tokens ูุดูุฑุฉ
- **ุงูุชูุงุก ุงูุตูุงุญูุฉ**: ุฌูุณุงุช ุชูุชูู ุชููุงุฆูุงู
- **ุชุชุจุน IP**: ูุฑุงูุจุฉ ุนูุงููู IP ููุฌูุณุงุช
- **ูุนูููุงุช ุงูุฌูุงุฒ**: ุชุณุฌูู ูุนูููุงุช ุงููุชุตูุญ ููุธุงู ุงูุชุดุบูู

### ุชูุถููุงุช ุงููุณุชุฎุฏู

- **ุงูุชุญูู ูู ุงูุตุญุฉ**: ุฌููุน ุงูุจูุงูุงุช ุงููุฏุฎูุฉ ูุญููุฉ
- **ุงูุตูุงุญูุงุช**: ูู ูุณุชุฎุฏู ูุตู ูุชูุถููุงุชู ููุท
- **ููู ุงูุชุฑุงุถูุฉ ุขููุฉ**: ุฅุนุฏุงุฏุงุช ุงูุชุฑุงุถูุฉ ูุญุงูุธุฉ ุนูู ุงูุฎุตูุตูุฉ

---

## ๐๏ธ ุงูุชุทููุฑ ูุงูุตูุงูุฉ

### ุชูุธูู ุงูุฌูุณุงุช ุงูููุชููุฉ

```javascript
// ุชุดุบูู ุฏูุฑู (cron job ููุชุฑุญ)
// POST /api/sessions/cleanup
```

### ูุฑุงูุจุฉ ุงูุฃุฏุงุก

```javascript
// ุฅุญุตุงุฆูุงุช ุงูุฌูุณุงุช ุงููุดุทุฉ
const activeSessionsCount = await UserSession.count({
  where: { is_active: true },
});

// ุฅุญุตุงุฆูุงุช ุงูุชูุถููุงุช
const preferencesStats = await UserPreferences.findAll({
  attributes: [
    "language",
    [sequelize.fn("COUNT", sequelize.col("language")), "count"],
  ],
  group: ["language"],
});
```

### ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฌุฏูู user_sessions

```sql
CREATE TABLE user_sessions (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  session_token VARCHAR(255) UNIQUE NOT NULL,
  device_info JSON,
  ip_address VARCHAR(45),
  location JSON,
  login_time DATETIME NOT NULL,
  last_activity DATETIME NOT NULL,
  expires_at DATETIME NOT NULL,
  is_active BOOLEAN DEFAULT TRUE,
  logout_time DATETIME,
  logout_reason ENUM('manual', 'timeout', 'forced', 'security'),
  created_at DATETIME,
  updated_at DATETIME
);
```

#### ุฌุฏูู user_preferences

```sql
CREATE TABLE user_preferences (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT UNIQUE NOT NULL,
  language ENUM('ar', 'en', 'fr', 'nl') DEFAULT 'ar',
  theme ENUM('light', 'dark', 'auto') DEFAULT 'light',
  timezone VARCHAR(50) DEFAULT 'Europe/Brussels',
  currency VARCHAR(3) DEFAULT 'EUR',
  date_format ENUM('DD/MM/YYYY', 'MM/DD/YYYY', 'YYYY-MM-DD') DEFAULT 'DD/MM/YYYY',
  time_format ENUM('12h', '24h') DEFAULT '24h',
  notifications JSON,
  dashboard_layout JSON,
  display_preferences JSON,
  accessibility JSON,
  privacy_settings JSON,
  auto_logout INT DEFAULT 480,
  created_at DATETIME,
  updated_at DATETIME
);
```

---

## ๐ฑ ุฃูุถู ุงูููุงุฑุณุงุช

1. **ูููุทูุฑูู**:

   - ุงุณุชุฎุฏู `sessionAPI` ู `preferencesAPI` ููุชูุงุนู ูุน ุงููุธุงู
   - ุงุฎุชุจุฑ ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฌูุณุงุช ุจุงูุชุธุงู
   - ุชุฃูุฏ ูู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุงูุฅุฑุณุงู

2. **ูููุณุชุฎุฏููู**:

   - ุฑุงุฌุน ุงูุฌูุณุงุช ุงููุดุทุฉ ุจุดูู ุฏูุฑู
   - ุงุณุชุฎุฏู "ุชุฐูุฑูู" ุจุญุฐุฑ ุนูู ุงูุฃุฌูุฒุฉ ุงููุดุชุฑูุฉ
   - ุงุถุจุท ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ ุญุณุจ ุงุญุชูุงุฌุงุชู

3. **ูููุณุคูููู**:
   - ุฑุงูุจ ุงูุฌูุณุงุช ุงููุดุจููุฉ
   - ูุนูู ุชูุธูู ุงูุฌูุณุงุช ุงูููุชููุฉ
   - ุงุญุชูุธ ุจูุณุฎ ุงุญุชูุงุทูุฉ ูู ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏููู

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ

1. **"ุงูุฌูุณุฉ ููุชููุฉ ุงูุตูุงุญูุฉ"**

   - ุงูุญู: ุชุณุฌูู ุฏุฎูู ุฌุฏูุฏ ุฃู ุชูุฏูุฏ ุงูุฌูุณุฉ

2. **"ูุดู ูู ุญูุธ ุงูุชูุถููุงุช"**

   - ุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุงููุฑุณูุฉ
   - ุชุฃูุฏ ูู ูุฌูุฏ ุงุชุตุงู ุจุงูุฅูุชุฑูุช

3. **"ูุง ูููู ุฅููุงุก ุงูุฌูุณุฉ"**
   - ุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู
   - ุชุฃูุฏ ูู ุฃู ุงูุฌูุณุฉ ูุง ุชุฒุงู ูุดุทุฉ

### ุฑุณุงุฆู ุงูุฎุทุฃ

```javascript
// ุฃูุซูุฉ ุนูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
try {
  await sessionAPI.terminateSession(sessionId);
} catch (error) {
  if (error.error_code === "SESSION_EXPIRED") {
    // ุฅุนุงุฏุฉ ุชูุฌูู ูุชุณุฌูู ุงูุฏุฎูู
    window.location.href = "/login";
  } else {
    // ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ุนุงูุฉ
    alert(error.message);
  }
}
```

---

_ุขุฎุฑ ุชุญุฏูุซ: ููุงูุฑ 2024_
