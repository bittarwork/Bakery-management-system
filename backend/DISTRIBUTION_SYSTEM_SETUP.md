# ๐ Distribution System Setup Guide

## ูุธุงู ุฅุฏุงุฑุฉ ุงูุชูุฒูุน ุงููุทูุฑ - ุฏููู ุงูุชุดุบูู ุงูุดุงูู

### ๐ **ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ**

1. **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: MySQL 8.0+ ุนูู Railway
2. **Node.js**: ุงูุฅุตุฏุงุฑ 18+ ูุน npm
3. **Google Maps API Key**: ููุฌูุฏ ูููุนู โ
4. **ูุชุตูุญ ุญุฏูุซ**: ูุฏุนู JavaScript ES6+

---

## ๐๏ธ **ุงูุฎุทูุฉ ุงูุฃููู: ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช**

### 1. ุชุดุบูู ุงูู Migration

```bash
# ุงูุงูุชูุงู ุฅูู ูุฌูุฏ ุงูุจุงู ุฅูุฏ
cd backend

# ุชุดุบูู migration script
node scripts/run-distribution-migration.js
```

### 2. ุงูุชุญูู ูู ูุฌุงุญ ุงูู Migration

```bash
# ุงูุชุญูู ูู ุงูุชุญุฏูุซุงุช
mysql -h shinkansen.proxy.rlwy.net -u root -p ZEsGFfzwlnsvgvcUiNsvGraAKFnuVZRA --port 24785 --protocol=TCP railway

# ุชุดุบูู ุงุฎุชุจุงุฑ ุงูุชุญูู
source migrations/verify-distribution-migration.sql;
```

### 3. ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู - Rollback

```bash
# ููุท ูู ุญุงูุฉ ุงูุญุงุฌุฉ ููุนูุฏุฉ ูููุถุน ุงูุณุงุจู
source migrations/rollback-distribution-migration.sql;
```

---

## ๐ **ุงูุฎุทูุฉ ุงูุซุงููุฉ: ุชุดุบูู ุงูุจุงู ุฅูุฏ**

### 1. ุชุญุฏูุซ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ

```bash
# ูู ููู backend/config.env ุฃู .env
DB_HOST=shinkansen.proxy.rlwy.net
DB_USER=root
DB_PASSWORD=ZEsGFfzwlnsvgvcUiNsvGraAKFnuVZRA
DB_NAME=railway
DB_PORT=24785

# Google Maps API Key (ููุฌูุฏ ูุณุจูุงู)
GOOGLE_MAPS_API_KEY=AIzaSyDhnQwiZuURSLApdQAR_86POf0a_f9n2IE
```

### 2. ุชุดุบูู ุงูุฎุงุฏู

```bash
# ุชุซุจูุช ุงูุชุจุนูุงุช ุงูุฌุฏูุฏุฉ
npm install

# ุชุดุบูู ุงูุฎุงุฏู
npm start
# ุฃู
node server.js
```

### 3. ุงูุชุญูู ูู ุนูู APIs ุงูุฌุฏูุฏุฉ

```bash
# ุงุฎุชุจุงุฑ ุงูู APIs ุงูุฌุฏูุฏุฉ
curl -X GET "http://localhost:5001/api/health"
curl -X GET "http://localhost:5001/api/distributors/active"
```

---

## ๐ฅ๏ธ **ุงูุฎุทูุฉ ุงูุซุงูุซุฉ: ุชุดุบูู ุงููุฑููุช ุฅูุฏ**

### 1. ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช

```bash
# ูู dashboard/src/config/config.js
API_BASE_URL: 'https://bakery-management-system-production.up.railway.app/api'
```

### 2. ุชุดุบูู Dashboard

```bash
# ุงูุงูุชูุงู ุฅูู ูุฌูุฏ ุงูู dashboard
cd dashboard

# ุชุซุจูุช ุงูุชุจุนูุงุช
npm install

# ุชุดุบูู ุงูุชุทุจูู
npm run dev
```

---

## ๐ฑ **ุงูุฎุทูุฉ ุงูุฑุงุจุนุฉ: APIs ุงูุฌุฏูุฏุฉ ุงููุชุงุญุฉ**

### **๐ Distributor Management APIs**

| Method  | Endpoint                            | ุงููุตู                     |
| ------- | ----------------------------------- | ------------------------- |
| `GET`   | `/api/distributors/active`          | ุฌูุจ ุฌููุน ุงูููุฒุนูู ุงููุดุทูู |
| `GET`   | `/api/distributors/live-tracking`   | ุงูุชุชุจุน ุงููุจุงุดุฑ ููููุฒุนูู   |
| `GET`   | `/api/distributors/:id/details`     | ุชูุงุตูู ููุฒุน ูุญุฏุฏ          |
| `POST`  | `/api/distributors/:id/location`    | ุชุญุฏูุซ ูููุน ุงูููุฒุน         |
| `PATCH` | `/api/distributors/:id/work-status` | ุชุญุฏูุซ ุญุงูุฉ ุงูุนูู          |
| `POST`  | `/api/distributors/:id/start-work`  | ุจุฏุก ููู ุงูุนูู             |
| `POST`  | `/api/distributors/:id/end-work`    | ุฅููุงุก ููู ุงูุนูู           |

### **๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ**

#### **ุฌุฏุงูู ุฌุฏูุฏุฉ:**

- `location_history` - ุณุฌู ููุงูุน ุงูููุฒุนูู
- `distributor_daily_performance` - ุงูุฃุฏุงุก ุงููููู ููููุฒุนูู

#### **ุญููู ุฌุฏูุฏุฉ ูู `users`:**

- `current_location` (JSON) - ุงููููุน ุงูุญุงูู
- `location_updated_at` - ููุช ุขุฎุฑ ุชุญุฏูุซ ูููุน
- `vehicle_info` (JSON) - ูุนูููุงุช ุงููุฑูุจุฉ
- `work_status` - ุญุงูุฉ ุงูุนูู
- `daily_performance` (JSON) - ุงูุฃุฏุงุก ุงููููู

#### **ุญููู ุฌุฏูุฏุฉ ูู `orders`:**

- `assigned_distributor_id` - ุงูููุฒุน ุงููุนูู
- `assigned_at` - ููุช ุงูุชุนููู
- `delivery_started_at` - ููุช ุจุฏุก ุงูุชูุตูู
- `delivery_completed_at` - ููุช ุงูุชูุงู ุงูุชูุตูู
- `delivery_notes` - ููุงุญุธุงุช ุงูุชูุตูู

---

## ๐ฏ **ุงูุฎุทูุฉ ุงูุฎุงูุณุฉ: ุงุฎุชุจุงุฑ ุงููุธุงู**

### 1. **ุงุฎุชุจุงุฑ ููุญุฉ ุงูุชูุฒูุน**

- ุงูุชูู ุฅูู: `http://localhost:3000/distribution/manager`
- ุชุญูู ูู ุนุฑุถ ุงูููุฒุนูู ุงูุญูููููู
- ุชุญูู ูู ุนูู ุงูู route ููุชูุงุตูู: `/distribution/distributor/:id`

### 2. **ุงุฎุชุจุงุฑ ุงูุนูููุงุช ุงูููููุฉ**

- ุงูุชูู ุฅูู: `http://localhost:3000/distribution/daily-operations`
- ุชุญูู ูู ุนุฑุถ ุงูุทูุจุงุช ููููู ุงูุญุงูู
- ุชุญูู ูู ุนูู ุฑุงุจุท ุชูุงุตูู ุงูุทูุจ

### 3. **ุงุฎุชุจุงุฑ ุงูุชุชุจุน ุงููุจุงุดุฑ**

- ุงูุชูู ุฅูู: `http://localhost:3000/distribution/live-tracking`
- ุชุญูู ูู ุนุฑุถ ุงูููุฒุนูู ูุน ุงูููุงูุน
- ุชุญูู ูู ุนูู ุงูุฎุฑูุทุฉ ุจุฏูู ุฃุฎุทุงุก

---

## ๐ง **ุงุณุชูุดุงู ุงูุฃุฎุทุงุก**

### **ุฎุทุฃ ูุงุนุฏุฉ ุงูุจูุงูุงุช**

```bash
# ุงูุชุญูู ูู ุงูุงุชุตุงู
node scripts/test-db-connection.js

# ุฅุนุงุฏุฉ ุชุดุบูู ุงูู migration
node scripts/run-distribution-migration.js
```

### **ุฎุทุฃ Google Maps**

- ุชุฃูุฏ ูู ูุฌูุฏ API Key ูู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ
- ุชุญูู ูู ุชูุนูู Maps JavaScript API

### **ุฎุทุฃ CORS**

- ุชุฃูุฏ ูู ุฅุถุงูุฉ `http://localhost:3000` ูู ุฅุนุฏุงุฏุงุช CORS ุงูุฎุงุฏู

---

## ๐ **ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ**

### โ **ุงูููุชููุฉ:**

1. **ุชุชุจุน ุงููููุน ุงููุจุงุดุฑ** - ูู ุชุทุจูู ุงูููุจุงูู
2. **ุฅุฏุงุฑุฉ ุงูุฃุฏุงุก ุงููููู** - ููุงููุณ ุดุงููุฉ
3. **ุตูุญุฉ ุชูุงุตูู ุงูููุฒุน** - ูุนูููุงุช ูุงููุฉ
4. **ุงูุชุชุจุน ุงููุจุงุดุฑ** - ุฎุฑูุทุฉ ุชูุงุนููุฉ
5. **ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุนูู** - ูุชุงุญ/ูุดุบูู/ุฅุฌุงุฒุฉ/ุบูุฑ ูุชุตู

### ๐ **ููุชุทููุฑ ุงููุณุชูุจูู:**

1. **ุชุทุจูู ุงูููุจุงูู** - Flutter ููููุฒุนูู
2. **ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุฑูุจุงุช** - ุฅุฏุงุฑุฉ ุดุงููุฉ ูููุฑูุจุงุช
3. **ุตูุญุฉ ุฃุฑุดูู ุงูููุฒุน** - ุณุฌู ุงูุนูู ุงูุชุงุฑูุฎู
4. **ุชูุงุฑูุฑ ุงูุฃุฏุงุก ุงููุชูุฏูุฉ** - ุชุญูููุงุช ุดุงููุฉ

---

## ๐ **ุจุนุฏ ุงูุชุดุบูู ุงููุงุฌุญ**

ุงูุขู ุงููุธุงู ูุฏุนู:

- **โ ููุงูุน ุญููููุฉ** ููููุฒุนูู ูู ุชุทุจูู ุงูููุจุงูู
- **โ ุฃุฏุงุก ูููู** ููุณุฌู ููุญุณูุจ ุชููุงุฆูุงู
- **โ ุชูุงุตูู ุดุงููุฉ** ููู ููุฒุน
- **โ ุชุชุจุน ูุจุงุดุฑ** ุนูู ุงูุฎุฑูุทุฉ
- **โ ุชูุงุฑูุฎ ูููุงุฏูุฉ** ูุฃุณุนุงุฑ ุจุงูููุฑู

---

## ๐ **ุงูุฏุนู**

ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู:

1. ุชุญูู ูู logs ุงูุฎุงุฏู
2. ุชุญูู ูู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุชุญูู ูู browser console ููุฃุฎุทุงุก

**ุชู ุฅูุฌุงุฒ ุงููุธุงู ุจูุฌุงุญ! ๐**
