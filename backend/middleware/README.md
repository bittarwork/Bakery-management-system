# Middleware Documentation

## ๐ Logger Middleware

ุชู ุฅูุดุงุก ูุธุงู ุชุณุฌูู ุงุญุชุฑุงูู ุฌุฏูุฏ ูุชุญุณูู ูุฑุงูุจุฉ ุงูุทูุจุงุช ูุงูุงุณุชุฌุงุจุงุช.

### โจ ุงูููุฒุงุช

#### 1. **ุชุณุฌูู ุงูุทูุจุงุช** (`requestLogger`)

- ๐ **ุงูููุช**: ุชุณุฌูู ุฏููู ุจุงูุชูููุช ุงููุญูู (ุจูุฌููุง)
- ๐จ **ุฃููุงู**: ุฃููุงู ูุฎุชููุฉ ููู ููุน ุทูุจ
- ๐ **ูุนูููุงุช ุดุงููุฉ**: IPุ ุงููุณุชุฎุฏูุ ุญุฌู ุงูุจูุงูุงุชุ ูุฏุฉ ุงูุงุณุชุฌุงุจุฉ
- ๐ **ุชูุงุตูู ุฐููุฉ**: ูุธูุฑ ูุนูููุงุช ุฅุถุงููุฉ ููุนูููุงุช ุงููููุฉ ููุท

#### 2. **ุชุณุฌูู ุงูุฃุฎุทุงุก** (`errorLogger`)

- ๐ฅ **ุฃุฎุทุงุก ูุงุถุญุฉ**: ุชุณุฌูู ููุตู ููุฃุฎุทุงุก
- ๐ง **Stack trace**: ูู ุจูุฆุฉ ุงูุชุทููุฑ ููุท
- ๐ค **ูุนูููุงุช ุงููุณุชุฎุฏู**: ูู ุชุณุจุจ ูู ุงูุฎุทุฃ

#### 3. **ุชุณุฌูู ูุจุณุท** (`simpleLogger`)

- ๐ **ุฃุณุงุณู**: ููุงุฎุชุจุงุฑุงุช ุฃู ุงูุจูุฆุงุช ุงูุจุณูุทุฉ

### ๐จ ุฃูุซูุฉ ุนูู ุงููุฎุฑุฌุงุช

#### ุทูุจ GET ุนุงุฏู:

```
[13/06/2025, 14:30:25] ๐ GET /api/orders from 127.0.0.1
[13/06/2025, 14:30:25] ๐ GET /api/orders 200 45ms
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุทูุจ POST ูุน ูุณุชุฎุฏู:

```
[13/06/2025, 14:30:30] ๐ POST /api/orders from 127.0.0.1
    ๐ฆ Body: 1.2KB
[13/06/2025, 14:30:30] ๐ POST /api/orders 201 120ms
    ๐ค User: ุฃุญูุฏ ูุญูุฏ (manager)
    โ Resource ID: 123
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุฎุทุฃ 401:

```
[13/06/2025, 14:30:35] ๐ GET /api/orders from 127.0.0.1
[13/06/2025, 14:30:35] ๐ GET /api/orders 401 15ms
    โ Error: ุบูุฑ ูุตุฑุญ ูู ุจุงููุตูู ุฅูู ูุฐุง ุงูููุฑุฏ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุฎุทุฃ ุฎุงุฏู:

```
[13/06/2025, 14:30:40] ๐ฅ ERROR
    POST /api/orders from 127.0.0.1
    Message: Database connection failed
    User: ุฃุญูุฏ ูุญูุฏ (manager)
    Stack: Error: Database connection failed...
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ๐ง ุงูุงุณุชุฎุฏุงู

#### ูู server.js:

```javascript
import { requestLogger, errorLogger } from "./middleware/logger.js";

// ุชุทุจูู middleware
app.use(requestLogger);

// ูู ููุงูุฉ middleware stack
app.use(errorLogger);
```

#### ุฅุนุฏุงุฏุงุช ูุฎุชููุฉ:

```javascript
// ููุชุทููุฑ - ุชุณุฌูู ูุงูู
if (process.env.NODE_ENV === "development") {
  app.use(requestLogger);
}

// ููุฅูุชุงุฌ - ุชุณุฌูู ูุจุณุท
if (process.env.NODE_ENV === "production") {
  app.use(simpleLogger);
}

// ููุงุฎุชุจุงุฑุงุช - ุจุฏูู ุชุณุฌูู
if (process.env.NODE_ENV !== "test") {
  app.use(requestLogger);
}
```

### ๐ฏ ุงูููุงุฆุฏ

1. **ูุฑุงูุจุฉ ุฃูุถู**: ุฑุคูุฉ ูุงุถุญุฉ ูุฌููุน ุงูุทูุจุงุช
2. **ุชุดุฎูุต ุณุฑูุน**: ูุนุฑูุฉ ุณุจุจ ุงูุฃุฎุทุงุก ุจุณุฑุนุฉ
3. **ุฃุฏุงุก ูุญุณู**: ูุฑุงูุจุฉ ุฃููุงุช ุงูุงุณุชุฌุงุจุฉ
4. **ุฃูุงู ุฃูุถู**: ุชุชุจุน ูู ูุตู ุฅูู ูุงุฐุง
5. **ุชุทููุฑ ุฃุณูู**: ูุนูููุงุช ูููุฏุฉ ุฃุซูุงุก ุงูุชุทููุฑ

### โ๏ธ ุงูุชุฎุตูุต

ูููู ุชุฎุตูุต ุงูุฃููุงู ูุงูุฃููููุงุช ูู ููู `logger.js`:

```javascript
// ุชุฎุตูุต ุงูุฃููุงู
const statusColors = {
  2: chalk.green, // ูุฌุงุญ
  4: chalk.yellow, // ุฎุทุฃ ุงูุนููู
  5: chalk.red, // ุฎุทุฃ ุงูุฎุงุฏู
};

// ุชุฎุตูุต ุงูุฃููููุงุช
const methodIcons = {
  GET: "๐",
  POST: "๐",
  PUT: "โ๏ธ",
  PATCH: "๐ง",
  DELETE: "๐๏ธ",
};
```

### ๐ ุงูุฃูุงู

- ูุง ูุณุฌู ูููุงุช ุงููุฑูุฑ ุฃู ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
- ูุฎูู ุชูุงุตูู ุงูุฃุฎุทุงุก ูู ุงูุฅูุชุงุฌ
- ูุณุฌู IP addresses ูููุฑุงูุจุฉ ุงูุฃูููุฉ

### ๐ ุงูุฃุฏุงุก

- ุชุฃุซูุฑ ุถุฆูู ุนูู ุงูุฃุฏุงุก
- ูููู ุชุนุทููู ูู ุจูุฆุฉ ุงูุงุฎุชุจุงุฑุงุช
- ุชุณุฌูู ุฐูู (ูุง ูุณุฌู ูู ุดูุก)
